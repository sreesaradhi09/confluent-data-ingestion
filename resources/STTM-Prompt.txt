
üß© Prompt: Generate STTM v16 from Scratch
Act as a data architecture automation expert.
Build a Source-to-Target Mapping (STTM) Excel file (version 16) that serves as a blueprint for automating Flink SQL generation from Kafka JSON to Iceberg tables.
üß± Requirements
	‚Ä¢	Use a single sheet called STTM_Mapping containing all mappings.
	‚Ä¢	Add a second sheet called Instructions_for_BA explaining how to fill the mapping in detail.
üìÑ Sheet 1: STTM_Mapping
Each row represents one target column mapping.‚Ä®Include these columns in the following order:
PipelineStage
TargetTable
TargetColumn
TargetDataType
IsTargetPK
TargetPK
SourcePrimaryTable
SourcePrimaryAlias
SourceField
SourceTransformExpr
FilterPredicate
JoinTable1
JoinAlias1
JoinType1
JoinCondition1
Notes
üîπ Behavior Rules
	‚Ä¢	PipelineStage: one of View, XREF, or FGAC.
	‚Ä¢	TargetPK: populate only for PK rows (one column name per PK cell); leave blank elsewhere.
	‚Ä¢	IsTargetPK: mark Y for PK columns, N otherwise. Highlight PK rows in light green.
	‚Ä¢	FilterPredicate: fill only on the PK row of each View.
	‚Ä¢	JoinCondition1: contain only the logical condition (no ‚ÄúINNER ON‚Äù or ‚ÄúLEFT ON‚Äù).
	‚Ä¢	Ordering: always list Views ‚Üí XREF ‚Üí FGAC, with PK rows first within each table.
	‚Ä¢	Validation Dropdowns: add dropdowns for PipelineStage, JoinType1, TargetDataType, and IsTargetPK.
	‚Ä¢	Column widths: auto-fit for readability; freeze header row and apply filters.
üîπ Naming Conventions
	‚Ä¢	Views end with _view
	‚Ä¢	Snapshot tables begin with XREF_
	‚Ä¢	FGAC tables end with _REF or _REFINED
üîπ Example Data
Populate initial example mappings for the following:
	‚Ä¢	CBA_CI_view (from Kafka JSON)
	‚Ä¢	CBA_CI_ADR_view
	‚Ä¢	XREF_CLH_CL_N
	‚Ä¢	XREF_CBA_CI
	‚Ä¢	FGAC_CBA_CI_ADR_REF
Include sample fields like:
CI_ID, CI_FRST_NM, CI_LAST_NM, BPD_ID, CLI_ID,
CI_ADR_QLFR_C, CI_AL_1, CI_ST, CI_Z_C, CI_CNTRY_C,
EMAIL_MASKED, REGION, SYS_STUS_C
Show correct usage of filters, joins, and expressions for these tables.
üìò Sheet 2: Instructions_for_BA
Create a clear, formatted instruction sheet that includes:
	‚Ä¢	Purpose of the STTM (how it feeds Flink SQL automation)
	‚Ä¢	Step-by-step instructions for each column
	‚Ä¢	Example row showing all fields
	‚Ä¢	Best practices and validation rules
	‚Ä¢	Configuration options for Flink tables (value.format, changelog.mode, etc.)
	‚Ä¢	Table prefix and suffix conventions (XREF_, FGAC_, _view, _REFINED)
	‚Ä¢	Emphasis on not writing full SQL statements ‚Äî only expressions
	‚Ä¢	Review checklist for BAs before handoff
Use bold headers, bullet points, and wrapped text for readability.
üé® Formatting
	‚Ä¢	Use light blue header background (#D9E1F2)
	‚Ä¢	Freeze header and first row
	‚Ä¢	Highlight PK rows (IsTargetPK='Y') in light green (#E2F0D9)
	‚Ä¢	Enable filters on all columns
	‚Ä¢	Set column width ‚âà 22 characters
Deliverable: A complete, well-formatted Excel file named STTM_v16_enhanced.xlsx ready for analyst use and generator automation.
